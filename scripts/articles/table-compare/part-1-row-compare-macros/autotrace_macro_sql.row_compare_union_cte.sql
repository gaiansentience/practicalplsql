
set autotrace traceonly explain
select * from row_compare_union_cte(products_source, products_target, columns(product_id))
/

--notes
    --autotrace only shows the call to the macro
    --the explain plan shows the materialized CTE expressions
/*
Autotrace TraceOnly
 Exhibits the performance statistics with silent query output

10 rows selected. 


PLAN_TABLE_OUTPUT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL_ID  7xbkvrn23nfnc, child number 0
-------------------------------------
select * from row_compare_union_cte(products_source, products_target, 
columns(product_id))
 
Plan hash value: 2482291778
 
-------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                 | Name                       | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
-------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                          |                            |      1 |        |     10 |00:00:00.01 |       4 |       |       |          |

PLAN_TABLE_OUTPUT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   1 |  VIEW                                     |                            |      1 |     12 |     10 |00:00:00.01 |       4 |       |       |          |
|   2 |   TEMP TABLE TRANSFORMATION               |                            |      1 |        |     10 |00:00:00.01 |       4 |       |       |          |
|   3 |    LOAD AS SELECT (CURSOR DURATION MEMORY)| SYS_TEMP_0FD9D668C_DD6BD2C |      1 |        |      0 |00:00:00.01 |       2 |  1024 |  1024 |          |
|   4 |     TABLE ACCESS FULL                     | PRODUCTS_SOURCE            |      1 |      6 |      6 |00:00:00.01 |       2 |       |       |          |
|   5 |    LOAD AS SELECT (CURSOR DURATION MEMORY)| SYS_TEMP_0FD9D668D_DD6BD2C |      1 |        |      0 |00:00:00.01 |       2 |  1024 |  1024 |          |
|   6 |     TABLE ACCESS FULL                     | PRODUCTS_TARGET            |      1 |      6 |      6 |00:00:00.01 |       2 |       |       |          |
|   7 |    SORT ORDER BY                          |                            |      1 |     12 |     10 |00:00:00.01 |       0 |  2048 |  2048 | 2048  (0)|
|   8 |     VIEW                                  |                            |      1 |     12 |     10 |00:00:00.01 |       0 |       |       |          |
|   9 |      UNION-ALL                            |                            |      1 |        |     10 |00:00:00.01 |       0 |       |       |          |
|  10 |       MINUS HASH                          |                            |      1 |        |      5 |00:00:00.01 |       0 |   683K|   683K|          |
|  11 |        VIEW                               |                            |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |

PLAN_TABLE_OUTPUT                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  12 |         TABLE ACCESS FULL                 | SYS_TEMP_0FD9D668C_DD6BD2C |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |
|  13 |        VIEW                               |                            |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |
|  14 |         TABLE ACCESS FULL                 | SYS_TEMP_0FD9D668D_DD6BD2C |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |
|  15 |       MINUS HASH                          |                            |      1 |        |      5 |00:00:00.01 |       0 |   683K|   683K|          |
|  16 |        VIEW                               |                            |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |
|  17 |         TABLE ACCESS FULL                 | SYS_TEMP_0FD9D668D_DD6BD2C |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |
|  18 |        VIEW                               |                            |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |
|  19 |         TABLE ACCESS FULL                 | SYS_TEMP_0FD9D668C_DD6BD2C |      1 |      6 |      6 |00:00:00.01 |       0 |       |       |          |
-------------------------------------------------------------------------------------------------------------------------------------------------------------
 

Statistics
-----------------------------------------------------------
              33  Requests to/from client
              33  SQL*Net roundtrips to/from client
              12  buffer is not pinned count
            1455  bytes received via SQL*Net from client
           60153  bytes sent via SQL*Net to client
               4  calls to get snapshot scn: kcmgss
               5  calls to kcmgcs
               4  consistent gets
               4  consistent gets from cache
               4  consistent gets pin
               4  consistent gets pin (fastpath)
               1  cursor authentications
               3  execute count
           32768  logical read bytes from cache
               2  no work - consistent read gets
              33  non-idle wait count
               3  opened cursors cumulative
               1  opened cursors current
               3  parse count (total)
              -1  session cursor cache count
               2  session cursor cache hits
               4  session logical reads
               2  sorts (memory)
            1555  sorts (rows)
               2  table scan blocks gotten
              12  table scan disk non-IMC rows gotten
              12  table scan rows gotten
               2  table scans (short tables)
              35  user calls

*/